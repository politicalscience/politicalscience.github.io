---
title: "Visualizing Data"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

[Handbook Homepage](https://politicalscience.github.io)

## Table of Contents

-   [Histograms]

-   [Boxplots]

-   [Scatterplots (With Best Fit Line)](#scatterplots-with-best-fit-line)

-   [Pairs and Correlations: pairs(), cor()](#pairs-and-correlations-pairs-cor)

------------------------------------------------------------------------

Remember to load tidyverse

```{r, message=FALSE}
library(tidyverse)
```

Let us also load the dataset we will use for these examples:

```{r, message = FALSE}
df <- read_csv("const-econ-vars.csv")
```

------------------------------------------------------------------------

[Table of Contents]

## Histograms

We can create histograms with the **ggplot()** and **geom_histogram()** function. In the example below:

-   **df** is the name of the dataframe, where the variable you want to plot is stored in. You can alter this to whatever your data frame is called.
-   **WageMedianConst** is the variable we are plotting this histogram for. You can alter this to whatever variable you want to plot.

```{r}

df %>%
  ggplot(aes(x=WageMedianConst)) +
  geom_histogram()

```

We can customise this plot further with arguments within the **geom_histogram()** function.

In the example below:

-   The **binwidth** argument is how wide we want every rectangle in the histogram to be. Larger numbers make the rectangles wider.

-   The **color** argument is the color of the border of the rectangles. Remember to put the color in quotations.

-   The **fill** argument is the color of the internal parts of the rectangles. Remember to put the color in quotations.

-   You don't have to include all 3 arguments. You can include 0, 1, 2, or 3. Remember to separate these by commas.

```{r}

df %>%
  ggplot(aes(x=WageMedianConst)) +
  geom_histogram(binwidth = 100, color = "black", fill = "white")

```

We can further complicate this by adding a mean line with **geom_vline()** , and a density function with **geom_density()**.

In the example below:

-   The **alpha** argument in **geom_density()** defines the transparency of the fill in the density plot.

-   **WageMedianConst** is the variable being plotting in this example. You should change this to the name of the variable you are plotting. Make sure to change both the variable name in the **ggplot()** function and the **geom_vline()** function.

```{r}
df %>%
  ggplot(aes(x=WageMedianConst)) +
  geom_histogram(aes(y=..density..)) +
  geom_density(alpha = 0.2, fill = "red") +
  geom_vline(aes(xintercept = mean(WageMedianConst)), color = "blue")
  
```

------------------------------------------------------------------------

[Table of Contents]

## Boxplots

```{r, echo = FALSE}

df <- df %>%
  mutate(UnempChange = ifelse(UnempConstRateChange > 0, "Increase", "Decrease"))

```

We can create Boxplots with the **ggplot()** and **geom_boxplot()** functions. In the example below:

-   **df** is the name of the dataframe, where the variable you want to plot is stored in. You can alter this to whatever your data frame is called.
-   **WageMedianConst** is the variable we are plotting this histogram for. You can alter this to whatever variable you want to plot.

```{r}
df %>%
  ggplot(aes(x = WageMedianConst)) +
  geom_boxplot()
```

We can compare a boxplot between categories by altering the **aes()** as follows:

-   **x =** the variable with categories

-   **y =** the variable we want to make boxplots of.

We can also rotate the boxplot with the command **coord_flip()**

```{r}
df %>%
  ggplot(aes(x = UnempChange, y = WageMedianConst)) +
  geom_boxplot() +
  coord_flip()
```

------------------------------------------------------------------------

[Table of Contents]

## Scatterplots (With Best Fit Line) {#scatterplots-with-best-fit-line}

We can create scatterplots between two variables with the **ggplot()**, **geom_point()**, and **geom_smooth()** functions.

In the example below:

-   **df** is the name of the dataframe, where the variable you want to plot is stored in. You can alter this to whatever your data frame is called.
-   **WageMedianConst** is the variable we are plotting on the x axis. You can alter this to whatever you want to plot on the x axis.
-   **deprivation_index_score** is the variable on the y axis. You can alter this to whatever you want to plot on the y axis.
-   The **geom_smooth()** function plots the best fit line. You can change the color to what you want it to be.

```{r}
df %>%
  ggplot(aes(x = WageMedianConst, y = deprivation_index_score)) +
  geom_point() +
  geom_smooth(method = "lm", color = "red")
```

We can also get a more "curvy" best fit line by removing the **method = "lm"** section.

```{r}
df %>%
  ggplot(aes(x = WageMedianConst, y = deprivation_index_score)) +
  geom_point() +
  geom_smooth(, color = "blue")
```

------------------------------------------------------------------------

[Table of Contents]

## Pairs and Correlations: pairs(), cor() {#pairs-and-correlations-pairs-cor}

The functions of **paris()** and **cor()** allow us to see the correlations between all the variables in the dataset.

-   IMPORTANT NOTE: pairs() and cor() require us to only use numerical data. Textual data will cause the functions to fail.

In the figure below:

-   We first filter out the columns that are not numerical in our original **df** dataframe: I did this with the indexing method, but you can also use the **select()** function to deselect these columns. See the managing data section on how to do this.

-   Then, we use the pairs() function. See the correlation plot matrices that are created.

```{r}
pairs(df[,-c(1, 2, 9)])
```

If we want a more numerical description of the relationships between the variables, we can use the **cor()** function, which outputs Pearson Correlation Coefficients.

```{r}
cor(df[,-c(1, 2, 9)])
```

------------------------------------------------------------------------

[Table of Contents]

[Handbook Homepage](https://politicalscience.github.io)

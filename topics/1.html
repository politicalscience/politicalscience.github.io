<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Elections and Policy Competition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="1_files/libs/clipboard/clipboard.min.js"></script>
<script src="1_files/libs/quarto-html/quarto.js"></script>
<script src="1_files/libs/quarto-html/popper.min.js"></script>
<script src="1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="1_files/libs/quarto-html/anchor.min.js"></script>
<link href="1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="mathjax-config.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Elections and Policy Competition</h1>
            <p class="subtitle lead">Topics in Political Science and Political Economy</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#median-voter-theory" id="toc-median-voter-theory" class="nav-link active" data-scroll-target="#median-voter-theory"><strong>Median Voter Theory</strong></a>
  <ul class="collapse">
  <li><a href="#the-downsian-model" id="toc-the-downsian-model" class="nav-link" data-scroll-target="#the-downsian-model">The Downsian Model</a></li>
  <li><a href="#equilibrium-outcome" id="toc-equilibrium-outcome" class="nav-link" data-scroll-target="#equilibrium-outcome">Equilibrium Outcome</a></li>
  <li><a href="#empirical-evidence" id="toc-empirical-evidence" class="nav-link" data-scroll-target="#empirical-evidence">Empirical Evidence</a></li>
  </ul></li>
  <li><a href="#policy-seeking-model" id="toc-policy-seeking-model" class="nav-link" data-scroll-target="#policy-seeking-model"><strong>Policy-Seeking Model</strong></a>
  <ul class="collapse">
  <li><a href="#policy-seeking-candidates" id="toc-policy-seeking-candidates" class="nav-link" data-scroll-target="#policy-seeking-candidates">Policy-Seeking Candidates</a></li>
  <li><a href="#equilibrium-outcome-1" id="toc-equilibrium-outcome-1" class="nav-link" data-scroll-target="#equilibrium-outcome-1">Equilibrium Outcome</a></li>
  </ul></li>
  <li><a href="#voting-on-more-than-policy" id="toc-voting-on-more-than-policy" class="nav-link" data-scroll-target="#voting-on-more-than-policy"><strong>Voting on More than Policy</strong></a>
  <ul class="collapse">
  <li><a href="#voters-vote-on-other-factors" id="toc-voters-vote-on-other-factors" class="nav-link" data-scroll-target="#voters-vote-on-other-factors">Voters Vote on Other Factors</a></li>
  <li><a href="#probabilistic-voting-model" id="toc-probabilistic-voting-model" class="nav-link" data-scroll-target="#probabilistic-voting-model">Probabilistic Voting Model</a></li>
  <li><a href="#equilibrium-outcome-2" id="toc-equilibrium-outcome-2" class="nav-link" data-scroll-target="#equilibrium-outcome-2">Equilibrium Outcome</a></li>
  <li><a href="#interpretation-of-the-outcome" id="toc-interpretation-of-the-outcome" class="nav-link" data-scroll-target="#interpretation-of-the-outcome">Interpretation of the Outcome</a></li>
  </ul></li>
  <li><a href="#uncertainty-over-median-voter" id="toc-uncertainty-over-median-voter" class="nav-link" data-scroll-target="#uncertainty-over-median-voter"><strong>Uncertainty over Median Voter</strong></a>
  <ul class="collapse">
  <li><a href="#model-with-uncertain-median" id="toc-model-with-uncertain-median" class="nav-link" data-scroll-target="#model-with-uncertain-median">Model with Uncertain Median</a></li>
  <li><a href="#equilibrium-outcome-3" id="toc-equilibrium-outcome-3" class="nav-link" data-scroll-target="#equilibrium-outcome-3">Equilibrium Outcome</a></li>
  <li><a href="#interpretation-of-the-model" id="toc-interpretation-of-the-model" class="nav-link" data-scroll-target="#interpretation-of-the-model">Interpretation of the Model</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>This chapter introduces how candidates compete over policy during elections. We first explore the Median Voter Theory, which predicts that both parties will converge to the median voter during elections. We then review empirical studies that show that this hypothesised convergence does not occur. Finally, we introduce new models that potentially might explain why parties do not converge in the centre.</p>
<hr>
<section id="median-voter-theory" class="level1">
<h1><strong>Median Voter Theory</strong></h1>
<section id="the-downsian-model" class="level3">
<h3 class="anchored" data-anchor-id="the-downsian-model">The Downsian Model</h3>
<p>Two candidates <span class="math inline">\(j \in \{A, B\}\)</span> are competing in an election. Both candidates only have one goal - to win the election. Their utility functions are as follows:</p>
<p><span class="math display">\[
u_j = R\phi, \quad \text{where } \phi =\begin{cases}
1 \quad \text{if win election} \\
0.5 \quad \text{if election is tied} \\
0 \quad \text{if lose election}
\end{cases}
\]</span></p>
<p>Each candidate <span class="math inline">\(j \in \{A, B \}\)</span> can choose a platform <span class="math inline">\(p_j \in [-1, 1]\)</span>.</p>
<p>Citizens each have a preferred policy <span class="math inline">\(q^i \in [-1, 1]\)</span>. Citizens’ preferred policies <span class="math inline">\(q^i\)</span> are uniformly distributed within this continuum:</p>
<p><span class="math display">\[
q^i  \sim U[-1, 1]
\]</span></p>
<p>Citizens will vote for the candidate who’s policy <span class="math inline">\(p_j\)</span> is closest to <span class="math inline">\(q_i\)</span>. Their utility is given as:</p>
<p><span class="math display">\[
u_i = |p_j - q^i|
\]</span></p>
<p>The timing of the game is as follows:</p>
<ol type="1">
<li>Each politician <span class="math inline">\(j \in \{A, B\}\)</span> will select platform <span class="math inline">\(p_j \in [-1, 1]\)</span>.</li>
<li>Voters observe <span class="math inline">\(p_A, p_B\)</span>, and vote <span class="math inline">\(e_i \in \{A, B \}\)</span>.</li>
<li>The politician with most votes wins, and payoffs are realised.</li>
</ol>
<p><br></p>
</section>
<section id="equilibrium-outcome" class="level3">
<h3 class="anchored" data-anchor-id="equilibrium-outcome">Equilibrium Outcome</h3>
<p>The utility function of the candidates is:</p>
<p><span class="math display">\[
u_j = R\phi, \quad \text{where } \phi =\begin{cases}
1 \quad \text{if win election} \\
0.5 \quad \text{if election is tied} \\
0 \quad \text{if lose election}
\end{cases}
\]</span></p>
<p>Thus, to maximise their payoff, they must maximise <span class="math inline">\(\phi\)</span>. The value of <span class="math inline">\(\phi\)</span> is dependent on the chosen policy position of candidate <span class="math inline">\(j\)</span>, <span class="math inline">\(p_j\)</span>, and the chosen position of their opponent <span class="math inline">\(p_{-j}\)</span>.</p>
<p><span class="math display">\[
\max\limits_{p_j \in [0, 1]} \phi_{p_j, p_{-j}}
\]</span></p>
<p>Since there are two candidates, this implies that to win the election and get <span class="math inline">\(\phi = 1\)</span>, a candidate must win 50% of the votes.</p>
<p>Since voter vote for the closest party to their preferred position <span class="math inline">\(q^i\)</span>, the 50% of votes they win must be in a continuum: i.e.&nbsp;they cannot win the voter at <span class="math inline">\(q^i = -1\)</span> and <span class="math inline">\(q_i = 1\)</span> if they do not win the voters in between.</p>
<p><br></p>
<p>Under these assumptions, the median voter - whose position is exactly the 50th percentile of voters, becomes pivotal. It is not possible to win a continuum of voters more than 50% without winning the median voter.</p>
<p>Thus, the median voter is the pivotal vote that you need to win.</p>
<p>How can candidates <span class="math inline">\(j \in \{A, B\}\)</span> win the pivotal voter? Candidates win a voter’s vote if they are the closes to the voter’s preferred policy.</p>
<p>Thus, both parties must be closer than the other to the median voter’s policy. Each party will move closer, until they both converge on the median voter.</p>
<p><br></p>
<p>Let us denote <span class="math inline">\(q^m\)</span> as the median voter’s policy. Thus, the <strong>median voter theory</strong> predicts both party’s chosen positions will converge at <span class="math inline">\(q^m\)</span>:</p>
<p><span class="math display">\[
p_A^* = p_B^* = q^m
\]</span></p>
<p>At this equilibrium, there is a tie - both candidates win 50% of the vote, and thus, both have 50% probability of winning the election.</p>
<p>If either player moves away from this position, they will lose the median voter, and lose the election. Thus, there exists no profitable deviation from this equilibrium.</p>
<p><br></p>
</section>
<section id="empirical-evidence" class="level3">
<h3 class="anchored" data-anchor-id="empirical-evidence">Empirical Evidence</h3>
<p>The median voter theory thus argues that both parties should converge at the median voter’s preferences. But is this actually the case? Do parties really converge at the same platform?</p>
<p>The Manifesto Project by the New York Times looked at US elections between 2000 and 2016. As shown by the figure below, clearly, both parties did not converge (and in fact, diverged 2012-onwards).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-386823128.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
<p>Ansolabehere, Snyder, and Stewart (2001) surveyed some candidates from 1996. The two lines are the average policy of each party. Clearly, the average policies of both parties are not converging - there is some distance between them.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-437192753.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>Further studies, including Bonica (2014) and Lee et al (2004), run other designs, such as regression discontinuities. All find divergence in party positions, not convergence.</p>
<p>Thus, there lacks empirical proof of consistent convergence. Of course, sometimes it occurs, but it is clearly not a given.</p>
<p><br></p>
<p><br></p>
<hr>
</section>
</section>
<section id="policy-seeking-model" class="level1">
<h1><strong>Policy-Seeking Model</strong></h1>
<section id="policy-seeking-candidates" class="level3">
<h3 class="anchored" data-anchor-id="policy-seeking-candidates">Policy-Seeking Candidates</h3>
<p>Why is there no convergence of parties to the median voter, as was predicted by the Downsian Model? One obvious place to look is at the assumptions in the Downsian Model. We assumed in the Downsian Model, that all candidates care about is winning the election (Rent-seeking).</p>
<p>However, if we think about the real world, this isn’t really the case. It is hard to imagine that in order to win an election, Bernie Sanders would forgo everything he has fought for, and suddenly become a centrist. Politicians like Bernie clearly have some utility derived from sticking with their beliefs and principles (Policy-seeking).</p>
<p><br></p>
<p>Let us take the Downsian model, but adjust the utility of the candidates <span class="math inline">\(j \in \{A, B\}\)</span> to reflect this policy-seeking nature.</p>
<p>Let us say party <span class="math inline">\(A\)</span> wants a policy as close as possible to <span class="math inline">\(-1\)</span>. The more they move away from <span class="math inline">\(-1\)</span>, the more they lose utility. For party <span class="math inline">\(B\)</span>, let us say their preferred policy is <span class="math inline">\(1\)</span>.</p>
<p>The final implemented policy of the winning party <span class="math inline">\(p\)</span>, is determined by who wins the election. If you lose the election, you have to deal with the winner’s preferred policy. Let us define <span class="math inline">\(\pi(p_A, p_B)\)</span> as the probability of candidate <span class="math inline">\(A\)</span> winning the election given the chosen <span class="math inline">\(p_A\)</span> and <span class="math inline">\(p_B\)</span>:</p>
<p><span class="math display">\[
u_A(p_A) = \underbrace{\pi(p_A, p_B)}_{\text{Pr A wins}}\underbrace{(-(p_A + 1)^2)}_{\text{A's utility}} + \underbrace{(1-\pi(p_A, p_B))}_{\text{Pr A loses}}\underbrace{(-(p_B + 1)^2)}_{\text{A's utility}}
\]</span></p>
<p><span class="math display">\[
u_B(p_B) =  \underbrace{(1-\pi(p_A, p_B))}_{\text{Pr B wins}}\underbrace{(-(p_B - 1)^2)}_{\text{B's utility}} + \underbrace{\pi(p_A, p_B)}_{\text{Pr B loses}}\underbrace{(-(p_A - 1)^2)}_{\text{B's utility}}
\]</span></p>
<p><br></p>
</section>
<section id="equilibrium-outcome-1" class="level3">
<h3 class="anchored" data-anchor-id="equilibrium-outcome-1">Equilibrium Outcome</h3>
<p>What is the equilibrium of this game? <u>Surprisingly, it is still the median voter’s position <span class="math inline">\(q^m\)</span>.</u></p>
<p>Let us say <span class="math inline">\(p_A = -0.5\)</span>, and <span class="math inline">\(p_B = 0.5\)</span>. In this situation, both candidates have a 50% chance of winning since they are equidistant from the median voter <span class="math inline">\(q^m\)</span>. Thus, <span class="math inline">\(\pi(-0.5, 0.5) = 0.5\)</span>. Using the utility functions above, we get:</p>
<p><span class="math display">\[
u_A(-0.5) = 0.5\underbrace{(-(-0.5 + 1)^2)}_{\text{A's utility}} + 0.5\underbrace{(-(0.5 + 1)^2)}_{\text{A's utility}} = -1.25
\]</span></p>
<p><span class="math display">\[
u_B(p_B) =  0.5\underbrace{(-(0.5 - 1)^2)}_{\text{B's utility}} + 0.5\underbrace{(-(-0.5 - 1)^2)}_{\text{B's utility}} = -1.25
\]</span></p>
<p>What if <span class="math inline">\(p_A\)</span> slightly deviates closer to the median voter, to <span class="math inline">\(-0.4\)</span>? Now, the probability of candidate <span class="math inline">\(A\)</span> winning is <span class="math inline">\(\pi(-0.4, 0.5)= 1\)</span>, since candidate <span class="math inline">\(A\)</span> is closer to the median voter <span class="math inline">\(q^m\)</span>. Thus, candidate <span class="math inline">\(A\)</span> now has a utility function of:</p>
<p><span class="math display">\[
u_A(-0.4) = 1\underbrace{(-(-0.4 + 1)^2)}_{\text{A's utility}} + 0\underbrace{(-(0.5 + 1)^2)}_{\text{A's utility}} = -0.36
\]</span></p>
<p>Thus, we can see candidate <span class="math inline">\(A\)</span> has a profitable deviation.</p>
<p>Why? The key is that if a party loses an election, they have to deal with their opponents policy <span class="math inline">\(p\)</span>. Thus, you are willing to win the election at all costs, because you do not want your opponent to implement their policy.</p>
<p>For example, if it was a far-left candidate versus a far-right candidate, the far left candidate would be incentivised to move closer to the median voter’s position <span class="math inline">\(q^m\)</span>, thus winning the election, and preventing the far-right policies they hate.</p>
<p>Thus, even with policy-seeking candidates, the equilibrium still suggests that both parties converge at <span class="math inline">\(q^m\)</span>. So, policy seeking is not the reason we see divergence in the real world.</p>
<p><br></p>
<p><br></p>
<hr>
</section>
</section>
<section id="voting-on-more-than-policy" class="level1">
<h1><strong>Voting on More than Policy</strong></h1>
<section id="voters-vote-on-other-factors" class="level3">
<h3 class="anchored" data-anchor-id="voters-vote-on-other-factors">Voters Vote on Other Factors</h3>
<p>So far, we have focused on voters voting exclusively on policy, and found that there is no divergence in parties. We still need another model that might explain why there is divergence in our empirical exercises.</p>
<p>We know from the real world, citizens don’t just vote on policy. There are other factors, such as competence, looks, speaking ability, charisma, etc., that all effect who wins elections. For example, take this graph of favourability ratings of British parties:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-2731921414.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>It is unlikely that parties are changing their platforms every few weeks. It seems to indicate that some other factor other than left-right policy position, that determines who voters want to vote for.</p>
<p><br></p>
</section>
<section id="probabilistic-voting-model" class="level3">
<h3 class="anchored" data-anchor-id="probabilistic-voting-model">Probabilistic Voting Model</h3>
<p>We will add non-policy related “shocks” to each voter, which we will call <strong>valence shocks</strong>.</p>
<p>All voters receive a common valence shock <span class="math inline">\(\delta\)</span>. This <span class="math inline">\(\delta\)</span> tells us something about how the voter <span class="math inline">\(i\)</span> feels about party <span class="math inline">\(A\)</span>. This <span class="math inline">\(\delta\)</span> is drawn from a uniform distribution.</p>
<p><span class="math display">\[
\delta \sim \underbrace{U\left[ -\frac{1}{\psi}, \ \frac{1}{\psi} \right]}_{\text{uniformly distributed}}
\]</span></p>
<p><span class="math inline">\(\psi \in (0, 1)\)</span> measures the importance of policy. The greater <span class="math inline">\(\psi\)</span> is, the more salient policy is with voters, and this will decrease the range of valence shock <span class="math inline">\(\delta\)</span>.</p>
<p>If <span class="math inline">\(\delta\)</span> is positive, then that means voter <span class="math inline">\(i\)</span> likes candidate <span class="math inline">\(A\)</span> for non-policy reasons. If <span class="math inline">\(\delta\)</span> is negative, then voter <span class="math inline">\(i\)</span> dislikes candidate <span class="math inline">\(A\)</span> for non-policy reasons. When <span class="math inline">\(|\delta|\)</span> is larger, the importance of non-policy related individuals is more important than policy.</p>
<p>Any voter <span class="math inline">\(i\)</span>’s utility depends on the implemented policy of the winner <span class="math inline">\(p\)</span>, and their preferred policy <span class="math inline">\(q^i\)</span>:</p>
<p><span class="math display">\[
u_i(p, q^i) = \underbrace{-|p-q^i|}_{\text{p utility}} + \underbrace{\begin{cases}
\delta \quad \text{if } A \text{ is elected} \\
0 \quad \text{if } B \text{ is elected}
\end{cases}}_{\text{non-policy valence shock}}
\]</span></p>
<p><br></p>
<p>The candidate’s <span class="math inline">\(j \in \{A, B\}\)</span> utility function is determined by the distance of the winner’s policy from their preferred policy <span class="math inline">\(q^j\)</span>. We will restrict <span class="math inline">\(q^j\)</span> such that <span class="math inline">\(q^A &lt; 0 &lt; q^B\)</span> (so both parties will have preferred policies on opposite sides of median <span class="math inline">\(q^m = 0\)</span>):</p>
<p><span class="math display">\[
u_A(p_A) = \underbrace{\pi(p_A, p_B)}_{\text{Pr A wins}}\underbrace{(-|p_A - q^A|)}_{\text{A's utility}} + \underbrace{(1-\pi(p_A, p_B))}_{\text{Pr A loses}}\underbrace{(-|p_B - q^A|)}_{\text{A's utility}}
\]</span></p>
<p><span class="math display">\[
u_B(p_B) =  \underbrace{(1-\pi(p_A, p_B))}_{\text{Pr B wins}}\underbrace{(-|p_B - q^B|)}_{\text{B's utility}} + \underbrace{\pi(p_A, p_B)}_{\text{Pr B loses}}\underbrace{(-|p_A - q^B|)}_{\text{B's utility}}
\]</span></p>
<p>Timing of the game is as follows:</p>
<ol type="1">
<li>Candidates propose their platforms <span class="math inline">\(p_A, p_B\)</span> simultaneously.</li>
<li>The voter observes the two platforms <span class="math inline">\(p_A, p_B\)</span>, and only the voter observes their valence shock <span class="math inline">\(\delta\)</span>.</li>
<li>Voter chooses who to vote for in <span class="math inline">\(j \in \{A, B\}\)</span>.</li>
</ol>
<p><br></p>
</section>
<section id="equilibrium-outcome-2" class="level3">
<h3 class="anchored" data-anchor-id="equilibrium-outcome-2">Equilibrium Outcome</h3>
<p>Since this is a dynamic game, we can use backwards induction to solve this game.</p>
<p>Let us think about the voter’s electoral choice. A voter <span class="math inline">\(i\)</span> elects <span class="math inline">\(A\)</span> if and only if she gets a higher utility from <span class="math inline">\(p_A\)</span> than <span class="math inline">\(p_B\)</span>. Mathematically:</p>
<p><span class="math display">\[
\underbrace{-|p_A - q^i| + \delta}_{u_i(p_A)} ≥ \underbrace{-|p_B - q^i|}_{u_i(p_B)}
\]</span></p>
<p>Thus, we obtain that voter <span class="math inline">\(i\)</span> elects <span class="math inline">\(A\)</span>, if and only if <span class="math inline">\(\delta\)</span> meets the following condition:</p>
<p><span class="math display">\[
\delta ≥ |p_A - q^i| - |p_B - q^i|
\]</span></p>
<p>The median voter thus has the condition:</p>
<p><span class="math display">\[
\underbrace{\delta ≥ |p_A - 0| - |p_B - 0|}_{\text{since }q_m = \ 0}
\]</span></p>
<p><br></p>
<p>Now, let us think about the candidates <span class="math inline">\(j \in \{A, B\}\)</span>. The candidate does not know <span class="math inline">\(\delta\)</span>, only how it is distributed. Candidate <span class="math inline">\(A\)</span> knows that they can only win the election if they win the median voter, and they can only win the median voter if the above condition of <span class="math inline">\(\delta\)</span> holds true.</p>
<p>We can calculate the probability <span class="math inline">\(\delta\)</span> fits the above condition by using the cumulative density function of a uniform distribution:</p>
<p><span class="math display">\[
Pr(X ≥ x) = \frac{b-x}{b-a} \quad s.t. \quad X \sim U[a, b]
\]</span></p>
<p>Thus, we can calculate the probability of <span class="math inline">\(\delta\)</span> meeting this condition:</p>
<p><span class="math display">\[
\begin{split}
Pr(\delta ≥ |p_A - 0| - |p_B - 0|) &amp; = \frac{\frac{1}{\psi} - (|p_A - 0|-|p_B - 0|)}{\frac{1}{\psi} - \left(-\frac{1}{\psi} \right)} \\
&amp; = \frac{\frac{1}{\psi} - (|p_A|-|p_b|)}{\frac{2}{\psi}} \\
&amp; = \left( \frac{1}{\psi} - |p_A| + |p_B| \right) \frac{\psi}{2} \\
&amp; = \frac{1}{2} + \psi\left( \frac{|p_B| - |p_A|}{2}\right)
\end{split}
\]</span></p>
<p>We know candidate <span class="math inline">\(A\)</span> can only win if this condition is met. Thus, this is the probabililty of <span class="math inline">\(A\)</span> winning:</p>
<p><span class="math display">\[
\pi(p_A, p_B)= \frac{1}{2} + \psi\left( \frac{|p_B| - |p_A|}{2}\right)
\]</span></p>
<p>Now, let us think about candidate <span class="math inline">\(A\)</span>’s utility function that candidate <span class="math inline">\(A\)</span> wants to maximise.</p>
<p><span class="math display">\[
u_A(p_A) = \underbrace{\pi(p_A, p_B)}_{\text{Pr A wins}}\underbrace{(-|p_A - q^A|)}_{\text{A's utility}} + \underbrace{(1-\pi(p_A, p_B))}_{\text{Pr A loses}}\underbrace{(-|p_B - q^A|)}_{\text{A's utility}}
\]</span></p>
<p>We have already calculated <span class="math inline">\(\pi(p_A, p_B)\)</span>, so let us plug that in:</p>
<p><span class="math display">\[
\begin{split}
u_A(p_A) = &amp; \underbrace{\left(\frac{1}{2} + \psi\left( \frac{|p_B| - |p_A|}{2}\right)\right)}_{\text{Pr A wins}}\underbrace{(-|p_A - q^A|)}_{\text{A's utility}} \\
&amp; \qquad \qquad \qquad+ \underbrace{(1- \left(\frac{1}{2} + \psi\left( \frac{|p_B| - |p_A|}{2}\right) \right))}_{\text{Pr A loses}}\underbrace{(-|p_B - q^A|)}_{\text{A's utility}} \\
= &amp; \left(\frac{1}{2} + \psi\left( \frac{|p_B| - |p_A|}{2}\right)\right)(-|p_A - q^A|) \\
&amp; \qquad \qquad \qquad + (\frac{1}{2} - \psi\left( \frac{|p_B| - |p_A|}{2}\right))(-|p_B - q^A|)\\
\end{split}
\]</span></p>
<p><br></p>
<p>We cannot yet take the first order condition, because of the absolute value functions. Let us eliminate them by logic, not math. Recall that <span class="math inline">\(q^A &lt; 0 &lt; q^B\)</span>.</p>
<p>We know that candidate <span class="math inline">\(A\)</span> will never choose a platform <span class="math inline">\(p_A &lt; q^A\)</span>. From the earlier <span class="math inline">\(\pi(p_A, p_B)\)</span>, we saw that their chances of winning are higher when they are closer to the median. You might as well just deviate to <span class="math inline">\(q^A\)</span>, which would be closer to the median, and your ideal point.</p>
<p>We also know candidate <span class="math inline">\(A\)</span> will not propose <span class="math inline">\(p_A &gt; 0\)</span>. This is because once they pass <span class="math inline">\(q^m = 0\)</span>, they are decreasing their chances of winning, while moving away from their preferred <span class="math inline">\(q^A\)</span>.</p>
<p>Thus, we know <span class="math inline">\(p_A \in [q^A, q^m]\)</span>. And since this game is symmetrical, we know <span class="math inline">\(p_B \in [q^m, q^B]\)</span>. What does this tell us? It tells us that <span class="math inline">\(|p_A - q^A| = p_A - q^A\)</span>, and <span class="math inline">\(|p_B - q^A| = p_B - q^A\)</span>. Thus, we can rewrite our utility function:</p>
<p><span class="math display">\[
\begin{split}
u_A(p_A) = &amp; \ \left(\frac{1}{2} + \psi\left( \frac{p_B - p_A}{2}\right)\right)(-(p_A - q^A) \\
&amp; \qquad \qquad \qquad + \left(\frac{1}{2} - \psi\left( \frac{p_B - p_A}{2}\right)\right)(-(p_B - q^A)) \\
= &amp; \ \left(\frac{1}{2} + \psi\left( \frac{p_B - p_A}{2}\right)\right)(-p_A + q^A) \\
&amp; \qquad \qquad \qquad+ \left(\frac{1}{2} - \psi\left( \frac{p_B - p_A}{2}\right)\right)(-p_B + q^A)) \\
= &amp; \ \left(\frac{1}{2} + \frac{\psi}{2}( p_B - p_A)\right)(-p_A + q^A) \\
&amp; \qquad \qquad \qquad + \left(\frac{1}{2} - \frac{\psi}{2}( p_B - p_A)\right)(-p_B + q^A))
\end{split}
\]</span></p>
<p><br></p>
<p>Now, we want to maximise <span class="math inline">\(u_A(p_A)\)</span> given <span class="math inline">\(p_A\)</span> for candidate <span class="math inline">\(A\)</span>. We can use the product rule to help <span class="math inline">\((uv)' = u'v + v'u\)</span>.</p>
<p><span class="math display">\[
\begin{split}
\frac{\partial u_A}{\partial p_A} = &amp; \frac{\partial}{\partial p_A} [ \underbrace{(\frac{1}{2} + \frac{\psi}{2}( p_B - p_A))}_{u_1} \underbrace{(-p_A + q^A)}_{v_1} \\
&amp; \qquad \qquad \qquad + \underbrace{(\frac{1}{2} - \frac{\psi}{2}( p_B - p_A))}_{u_2} \underbrace{(-p_B + q^A))}_{v_2} ] \\
= &amp; \underbrace{\left( - \frac{\psi}{2}\right)}_{u_1'} \underbrace{(-p_A + q^A)}_{v_1}
+ \underbrace{(-1)}_{v'_1} \underbrace{\left( \frac{1}{2} + \frac{\psi}{2}( p_B - p_A)\right)}_{u_1} \\
&amp; \qquad \qquad \qquad + \underbrace{\left( \frac{\psi}{2}\right)}_{u_2'} \underbrace{(-p_B + q^A)}_{v_1}
+ \underbrace{(0)}_{v_1'} \underbrace{\left( \frac{1}{2} - \frac{\psi}{2}( p_B - p_A)\right)}_{u_1} \\
= &amp; \left( -\frac{\psi}{2}\right)(-p_A + q^A) - \left(\frac{1}{2} - \frac{\psi}{2}( p_B - p_A)\right) \\
&amp; \qquad \qquad \qquad+ \left( \frac{\psi}{2}\right)(-p_B + q^A) \\
= &amp; \left(\frac{\psi}{2}\right) (-(-p_A + q^A) + (-p_B + q^A)) \\
&amp; \qquad \qquad \qquad- \left(\frac{1}{2} - \frac{\psi}{2}( p_B - p_A)\right)\\
= &amp; \left(\frac{\psi}{2}\right) ((p_A - q^A) - (p_B - q^A)) - \left(\frac{1}{2} - \frac{\psi}{2}( p_B - p_A)\right)\\
\end{split}
\]</span></p>
<p><br></p>
<p>The equilibrium platform can be viewed as a tradeoff:</p>
<ul>
<li>If you move closer to the median, you are increasing your chances of winning the election, but moving further from your preferred <span class="math inline">\(q^j\)</span>.</li>
<li>If you stay closer to preferred <span class="math inline">\(q^j\)</span>, you are decreasing your chances of winning the election. This can be seen in our maximisation condition:</li>
</ul>
<p><span class="math display">\[
\underbrace{\left(\frac{\psi}{2}\right) ( (p_A - q^A) - (p_B - q^A))}_{\text{Marg. eff. of preference }} - \underbrace{\left(\frac{1}{2} - \frac{\psi}{2}( p_B - p_A)\right)}_{\text{Marg. eff. of median}} = 0
\]</span></p>
<p>Solving this, we will get the following solution:</p>
<p><span class="math display">\[
p_A = - \frac{1}{2 \psi} \quad \text{if} \quad  - \frac{1}{2 \psi} &gt; q^A
\]</span></p>
<p>Since the game is symmetrical, <span class="math inline">\(p_B\)</span> will be the same distance from the median:</p>
<p><span class="math display">\[
p_B = \frac{1}{2 \psi} \quad \text{if} \quad \frac{1}{2 \psi} &lt; q^B
\]</span></p>
<p>The additional if conditions state that if the given solution goes further from the median than their preferred policies <span class="math inline">\(q^A\)</span> and <span class="math inline">\(q^B\)</span>, they will just stick to their preferred candidates.</p>
<p><br></p>
</section>
<section id="interpretation-of-the-outcome" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-the-outcome">Interpretation of the Outcome</h3>
<p>Our predicted positions of both candidates are:</p>
<p><span class="math display">\[
p_A = - \frac{1}{2 \psi}, \quad p_B = \frac{1}{2 \psi}
\]</span></p>
<p>As we can see, given <span class="math inline">\(q^m = 0\)</span>, there is no predicted convergence of the two parties! This matches what we see empirically - divergence!</p>
<p>Remember this figure we looked at earlier:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-437192753.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<p>The two lines represent the <strong>democrats</strong> and <strong>republicans</strong> “average” positioning. This seems to line up well with our data.</p>
<p>Furthermore, recall that we assumed the median voter <span class="math inline">\(q^m = 0\)</span>. Our equilibrium is relative to <span class="math inline">\(q^m = 0\)</span>. However, if we change <span class="math inline">\(q^m\)</span>, we will get <span class="math inline">\(p_A = q^m - \frac{1}{2 \psi}\)</span> and <span class="math inline">\(p_B = q^m + \frac{1}{2 \psi}\)</span>.</p>
<p>What this predicts is that if the median voter moves either right or left, the entire positioning of both parties changes (and they still do not converge). We can see this matches the empirical evidence above as well - as districts become more conservative, parties move more conservative while still not converging.</p>
<p><br></p>
<p>Interestingly, we can see the two party’s positioning depends on <span class="math inline">\(\psi\)</span>. Remember that <span class="math inline">\(\psi\)</span> is the importance of policy. As <span class="math inline">\(\psi\)</span> increases, the two parties get closer to the median voter. If <span class="math inline">\(\psi\)</span> becomes smaller, there is further divergence.</p>
<p>However, this second prediction has not been backed up by empirical evidence. Hall and Fowlder (2016) use a regression discontinuity design to test convergence between low and high salience issues, and they do not find convergence.</p>
<p>However, this model is still useful, as it illustrates a critical tradeoff: the tradeoff of making policies more electable, and sticking with your own policy beliefs. This tradeoff dominates political strategy all the time.</p>
<p><br></p>
<p><br></p>
<hr>
</section>
</section>
<section id="uncertainty-over-median-voter" class="level1">
<h1><strong>Uncertainty over Median Voter</strong></h1>
<section id="model-with-uncertain-median" class="level3">
<h3 class="anchored" data-anchor-id="model-with-uncertain-median">Model with Uncertain Median</h3>
<p>We have included some other aspects apart from policy in the last model. But, we still make a huge assumption: that the parties know what the median voter’s positioning is.</p>
<p>Let us assume that there are only 3 policy positions in our policy space: <span class="math inline">\(p_i \in \{-1, 0, 1\}\)</span>. Voters preferred policy <span class="math inline">\(q^i \in \{-1, 0, 1\}\)</span> as well.</p>
<p>There are two parties <span class="math inline">\(j \in \{A, B\}\)</span> who want to win the election. However, party <span class="math inline">\(A\)</span> is considered by voters as the “more competent” voter, and thus, if party <span class="math inline">\(A\)</span> wins, all voters will get an extra payoff of <span class="math inline">\(\delta \in (0, 1)\)</span>. We can define voter utility as:</p>
<p><span class="math display">\[
u_i(p) = \underbrace{-|p - q^i|}_{\text{utility from } p} + \underbrace{I(p_A,p_B)\delta}_{\text{valence if A wins}}
\]</span></p>
<p>Where <span class="math inline">\(p\)</span> is the winning party’s policy position, <span class="math inline">\(q^i\)</span> is the voter’s preferred policy position, and <span class="math inline">\(I(p_A, p_B)\)</span> is an indicator function where if party <span class="math inline">\(A\)</span> wins, <span class="math inline">\(I(p_A, p_B) = 1\)</span>, and win party <span class="math inline">\(B\)</span> wins, <span class="math inline">\(I(p_A, p_B) = 0\)</span>.</p>
<p>Importantly, no parties know the exact location of the median voter. They only know that the median is at -1 with probability <span class="math inline">\(\alpha\)</span>, located at 1 with probability <span class="math inline">\(\alpha\)</span>, and located at 0 with probability <span class="math inline">\(1- 2\alpha\)</span>. Essentially, <span class="math inline">\(\alpha \in (0, \frac{1}{2})\)</span> captures the polarisation of the electorate.</p>
<p>The model basically says that competence does not supersede policy, but when voters are indifferent between two parties’ policies, they will always prefer the more competent candidate.</p>
<p><br></p>
</section>
<section id="equilibrium-outcome-3" class="level3">
<h3 class="anchored" data-anchor-id="equilibrium-outcome-3">Equilibrium Outcome</h3>
<p>We can write out the game in a matrix for easier understanding:</p>
<p><span class="math display">\[
\begin{bmatrix}
&amp; p_B = -1 &amp; p_B = 0 &amp; p_B = 1 \\
p_A = -1 &amp; (1,0) &amp; (\alpha, 1 - \alpha) &amp; (1- \alpha, \alpha) \\
p_A = 0 &amp; (1 - \alpha, \alpha) &amp; (1, 0) &amp; (1- \alpha, \alpha) \\
p_A = 1 &amp; (1- \alpha, \alpha) &amp; (\alpha, 1- \alpha)&amp; (1, 0)
\end{bmatrix}
\]</span></p>
<p>There is no pure strategy Nash Equilibrium. However, there is a mixed strategy Nash Equilibrium.</p>
<p>Let us look at party <span class="math inline">\(A\)</span>’s best responses while player <span class="math inline">\(B\)</span> mixes. Let us define <span class="math inline">\(Pr(p_B = 0) = q\)</span>, and <span class="math inline">\(Pr(p_B = -1) = Pr(p_B = 1) = \frac{1-q}{2}\)</span>.</p>
<p><span class="math display">\[
\begin{split}
u_A(-1) = &amp; \ 1  Pr(p_B = -1) +  \alpha  Pr(p_B = 0) + (1-\alpha)  Pr(p_B = 1) \\
= &amp; \ 1 \left( \frac{1-q}{2}\right) + \alpha q + (1- \alpha)\frac{1-q}{2} \\
= &amp; \ \underbrace{\frac{1-q}{2}}_{\text{same as}} + \alpha q +  \underbrace{\frac{1-q}{2}}_{\text{same as}} - \frac{\alpha(1-q)}{2} \\
= &amp; \ \underbrace{1-q}_{\text{summed}} + \alpha q - \frac{\alpha}{2} + \frac{\alpha q}{2} \\
= &amp; \ 1-q + \frac{3 \alpha q}{2}-\frac{\alpha}{2} \\
\end{split}
\]</span></p>
<p><br></p>
<p><span class="math display">\[
\begin{split}
u_A(0) &amp; = (1-\alpha)  Pr(p_B = -1) + 1  Pr(p_B = 0) + (1-\alpha)  Pr(p_B = 1) \\
&amp; = \underbrace{(1-\alpha)\frac{1-q}{2}}_{\text{same as}} + 1q + \underbrace{(1-\alpha)\frac{1-q}{2}}_{\text{same as}} \\
&amp; = (1-q)(1- \alpha) + q \\
&amp; = \underbrace{1 - \alpha - q + q\alpha}_{\text{expanded out}} + q \\
&amp; = 1 - \alpha + q\alpha
\end{split}
\]</span></p>
<p>For candidate <span class="math inline">\(A\)</span> to have a mixed strategy, they must be indifferent between the two. Thus:</p>
<p><span class="math display">\[
\begin{split}
&amp; u_A(p_A = -1) = u_A(p_A = 0) \\
&amp; 1 - q - \frac{3 \alpha q}{2} - \frac{\alpha}{2} = 1 - \alpha - q \alpha \\
&amp; 2 - 2q + 3 q \alpha - \alpha = 2 - 2\alpha + 2 q \alpha \\
&amp; -2 + q \alpha = - \alpha \\
&amp; -q(2 - \alpha)  = - \alpha \\
&amp; q = \frac{\alpha}{2 - \alpha}
\end{split}
\]</span></p>
<p>Let us look at party <span class="math inline">\(B\)</span>’s best responses while player <span class="math inline">\(B\)</span> mixes. Let us define <span class="math inline">\(Pr(p_A = 0) = p\)</span>, and <span class="math inline">\(Pr(p_A = -1) = Pr(p_A = 1) = \frac{1-p}{2}\)</span>.</p>
<p><span class="math display">\[
\begin{split}
u_B(-1) &amp; = \underbrace{0  Pr(p_A = -1)}_{= \ 0} + \alpha  Pr(p_A = 0) + \alpha  Pr(p_A = 1) \\
&amp; = \alpha p + \alpha \left(\frac{1-p}{2}\right) \\
&amp; = \alpha p + \frac{\alpha}{2} - \frac{\alpha p}{2} \\
&amp; = \frac{\alpha p}{2} + \frac{\alpha}{2}
\end{split}
\]</span></p>
<p><br></p>
<p><span class="math display">\[
\begin{split}
u_B(0) &amp; = (1-\alpha)  Pr(p_A = -1) + \underbrace{0  Pr(p_A = 0)}_{= \ 0} + (1-\alpha)  Pr(p_A = 1) \\
&amp; = (1- \alpha)\left( \frac{1-p}{2} \right) + (1- \alpha)\left( \frac{1-p}{2} \right) \\
&amp; = (1- \alpha) (1-p) \\
&amp; = 1 - \alpha -p + p \alpha
\end{split}
\]</span></p>
<p>For candidate <span class="math inline">\(B\)</span> to have a mixed strategy, they must be indifferent between the two. Thus:</p>
<p><span class="math display">\[
\begin{split}
&amp; u_B(p_B = -1) = u_B(p_B = 0) \\
&amp; \frac{\alpha p}{2} + \frac{\alpha}{2} = 1 - \alpha -p + p \alpha \\
&amp; \alpha p + \alpha = 2 - 2\alpha - 2p + 2p \alpha \\
&amp; - \alpha p + 2p = 2 -3 \alpha \\
&amp; p(2 - \alpha) = 2 - 3 \alpha \\
&amp; p = \frac{2-3 \alpha}{2 - \alpha}
\end{split}
\]</span></p>
<p>Thus, we have found the probabilities that sustain a mixed strategy Nash Equilibrium.</p>
<p>Candidate <span class="math inline">\(A\)</span> will play <span class="math inline">\(p_A = 0\)</span> at probability <span class="math inline">\(\frac{2 - 3 \alpha}{2 - \alpha}\)</span>, and split the remainder between <span class="math inline">\(p_A = -1\)</span> and <span class="math inline">\(p_A = 1\)</span>.</p>
<p>Candidate <span class="math inline">\(B\)</span> will play <span class="math inline">\(p_B = 0\)</span> at probability <span class="math inline">\(\frac{\alpha}{2 - \alpha}\)</span>, and split the remainder between <span class="math inline">\(p_B = -1\)</span> and <span class="math inline">\(p_B = 1\)</span>.</p>
<p><br></p>
</section>
<section id="interpretation-of-the-model" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-of-the-model">Interpretation of the Model</h3>
<p>We can graph the probability of each player playing the centrist policy 0, given different values of <span class="math inline">\(\alpha\)</span> (which is polarisation of the elite). Note in this graph, candidate <span class="math inline">\(L\)</span> refers to candidate <span class="math inline">\(A\)</span>, and candidate <span class="math inline">\(R\)</span> refers to candidate <span class="math inline">\(B\)</span>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-2676628971.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
<p>We can see the disadvantaged candidate <span class="math inline">\(B\)</span> is far less likely to propose playing the centrist policy 0. Why is this?</p>
<p>Well, if both candidates go to the centrist policy 0, who wins? In the Downsian model, the probability is 50% of winning for both candidates. However, because voters prefer the more competent candidate <span class="math inline">\(A\)</span>, if both converge to the same policy, the voters will vote for candidate <span class="math inline">\(A\)</span>. That means if both candidates converge to the centre, <span class="math inline">\(A\)</span> wins 100% of the time, and <span class="math inline">\(B\)</span> cannot win.</p>
<p>Thus, disadvantaged candidate <span class="math inline">\(B\)</span> has an incentive to become more extreme. Only by differentiating themselves, can they have a chance of winning. They have to hope that the median is indeed at -1 or 1.</p>
<p>Candidate <span class="math inline">\(A\)</span> thus has the incentive of copying candidate <span class="math inline">\(B\)</span>’s platform. This is because if they both have the same platform, the more competent <span class="math inline">\(A\)</span> will win with 100% probability.</p>
<p><br></p>
<p>What implications does this have? If we look at many elections, we will see the generally more perceived “incompetent” candidate will try to adopt more extreme positions.</p>
<p>For example, during the 2024 UK general election, the unpopular and widely regarded as less-competent Rishi Sunak began to adopt pretty wild policies, such as a National Service plan. Unfortunately for Sunak, the median voter was not at this more extreme end.</p>
<p>Another example could be Donald Trump, who is generally not seen as “competent” or “experienced” as many of his adversaries. He gambled by differentiating himself with populist outside policies. Luckily for Trump, the US median voter was indeed much more right-wing and populist than many had thought, and this propelled Trump into the White House twice.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>